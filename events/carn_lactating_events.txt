namespace = carn_lactating

# Seed event
carn_lactating.0001 = {
	hidden = yes

	trigger = {
		OR = {
			has_game_rule = carn_lactation_any_gender
			has_game_rule = carn_lactation_female_only
		}
		is_alive = yes
		is_female = yes
	}

	immediate = {
		carn_seed_lactating_trait_effect = yes
	}
}

# Remove trait if no longer eligible
carn_lactating.0002 = {
	hidden = yes

	trigger = {
		NOT = { has_game_rule = carn_lactation_disabled }
		is_alive = yes
		has_trait = lactating
		carn_should_still_be_lactating_trigger = no
	}

	immediate = {
		carn_remove_lactating_trait_effect = yes
	}
}

# Give lactating trait after birth
carn_lactating.0003 = {
	hidden = yes

	trigger = {
		OR = {
			has_game_rule = carn_lactation_any_gender
			has_game_rule = carn_lactation_female_only
		}
		is_alive = yes
		is_female = yes
	}

	immediate = {
		carn_add_lactating_trait_effect = yes
		add_character_modifier = {
			modifier = carn_postpartum_infertility_modifier
			days = 365
		}
	}
}
